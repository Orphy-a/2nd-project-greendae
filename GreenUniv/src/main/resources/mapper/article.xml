<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.greenuniv.greenuniv.dao.mapper.ArticleMapper">
  <resultMap id="articleMap" type="com.greenuniv.greenuniv.dto.article.ArticleDTO">
    <id property="id" column="article_id"/>
    <result property="title" column="article_title"/>
    <result property="category" column="article_category"/>
    <result property="status" column="article_status"/>
    <result property="content" column="article_content"/>
    <result property="view" column="article_view"/>
    <result property="registerDate" column="article_register_date"/>
    <collection property="user" resultMap="com.greenuniv.greenuniv.dao.mapper.UserMapper.userMap"/>
  </resultMap>

  <select id="selectAll" resultMap="articleMap">
    SELECT
    `artcl`.id AS `article_id`,
    `artcl`.title AS `article_title`,
    `artcl`.category AS `article_category`,
    `artcl`.`status` AS `article_status`,
    `artcl`.content AS `article_content`,
    `artcl`.`view` AS `article_view`,
    `artcl`.register_date AS `article_register_date`,
    `user`.id AS `user_id`,
    `user`.`name` AS `user_name`
    FROM `article` AS `artcl`
    JOIN `user`
    ON `user`.id = `artcl`.user_id;
  </select>

  <select id="selectById" resultMap="articleMap">
    SELECT
    `artcl`.id AS `article_id`,
    `artcl`.title AS `article_title`,
    `artcl`.category AS `article_category`,
    `artcl`.`status` AS `article_status`,
    `artcl`.`view` AS `article_view`,
    `artcl`.register_date AS `article_register_date`,
    `user`.id AS `user_id`,
    `user`.`name` AS `user_name`
    FROM `article` AS `artcl`
    JOIN `user`
    ON `user`.id = `artcl`.user_id
    WHERE `artcl`.id = #{id};
  </select>

  <select id="selectAllWith" resultMap="articleMap">
    SELECT
    `artcl`.id AS `article_id`,
    `artcl`.title AS `article_title`,
    `artcl`.category AS `article_category`,
    `artcl`.`status` AS `article_status`,
    `artcl`.content AS `article_content`,
    `artcl`.`view` AS `article_view`,
    `artcl`.register_date AS `article_register_date`,
    `user`.id AS `user_id`,
    `user`.`name` AS `user_name`
    FROM `article` AS `artcl`
    JOIN `user`
    ON `user`.id = `artcl`.user_id
    WHERE `artcl`.${colName} = #{value};
  </select>
</mapper>
